/*! Development or minified for Alejandro Romero of AgilApps [dat] co  */
/*! cooperapp: Version 0.1.0 2014-03-28 */
var app;app={initialize:function(){return this.bindEvents()},bindEvents:function(){return document.addEventListener("deviceready",this.onDeviceReady,!1)},onDeviceReady:function(){return app.receivedEvent("deviceready")},receivedEvent:function(a){var b,c,d;return c=document.getElementById(a),b=c.querySelector(".listening"),d=c.querySelector(".received"),b.setAttribute("style","display:none;"),d.setAttribute("style","display:block;"),console.log("Received Event: "+a)}},jQuery.fn.reset=function(){return $(this).each(function(){return this.reset()})},$(document).on("pageinit","#home",function(){return console.log("Loading delegate event to home and login"),0===sessionStorage.length?(console.log("sessionStorage clean"),$.mobile.changePage("#login")):$.mobile.changePage("#home"),$("#lookCookie").on("click",function(){return $("#setCookie").append("<p>"+sessionStorage.getItem("cookie")+"</p>")})}),$(document).on("pageinit","#login",function(){return console.log("Loading delegate event for login"),$("#loginUser").on("click",function(){var a,b,c;return console.log("click on login"),b=$("#userEmailLogin").val(),c=$("#userPasswordLogin").val(),a="5852c0ef0719d1e0922e8e9806a4f5aa",sessionStorage.setItem("cookie",a),console.log("values localStorage: "+localStorage.getItem("email")+", "+localStorage.getItem("password")+", "+sessionStorage.getItem("cookie")),console.log("values intro: "+b+", "+c),""!==b&&""!==c&&b===localStorage.getItem("email")&&c===localStorage.getItem("password")&&sessionStorage.length>0?sessionStorage.getItem("cookie")!==a||0===sessionStorage.length?(sessionStorage.setItem("cookie",a),$.mobile.changePage("#home")):$.mobile.changePage("#home"):($("#loginForm").reset(),$.mobile.changePage("#login"))})}),$(document).on("pageinit","#createUser",function(){return console.log("Loading delegate event to createUser"),$("#saveUser").on("click",function(){var a,b,c,d,e,f;return console.log("Click on SaveUser"),b=$("#userEmailCreateUser").val(),c=$("#firstnameCreateUser").val(),d=$("#lastnameCreateUser").val(),f=$("#phoneCreateUser").val(),e=$("#userPasswordCreateUser").val(),a="5852c0ef0719d1e0922e8e9806a4f5aa",""!==b&&""!==c&&""!==d&&""!==f&&""!==e?(sessionStorage.setItem("cookie",a),localStorage.setItem("email",b),localStorage.setItem("firstname",c),localStorage.setItem("lastname",d),localStorage.setItem("password",e),localStorage.setItem("phone",f),$(document).on("pageinit","#profile",function(){return console.log("Building Profile from DOM to createUser"),$("#dataInfo").remove(".info"),console.log($("#dataInfo").children().length),0===$("#dataInfo").children().length?($("#dataInfo").append('<li><a href="#" class="info">'+localStorage.getItem(c)+'</a></li><li><a href="#" class="info">'+localStorage.getItem(d)+'</a></li><li><a href="#" class="info">'+localStorage.getItem(b)+'</a></li><li><a href="#" class="info">'+localStorage.getItem(f)+"</a></li>"),$("#dataInfo").listview("refresh")):void 0}),$.mobile.changePage("#profile")):(console.log(b+", "+c+", "+d+", "+f+", "+e),$("#createUserForm").reset(),alert("Ingrese todos los datos"))})}),$(document).on("pageinit","#profile",function(){return console.log("Building DOM from profile to profile"),$("#dataInfo").remove(".info"),console.log($("#dataInfo").children().length),0===$("#dataInfo").children().length?($("#dataInfo").append('<li><a href="#" class="info">'+localStorage.getItem("firstname")+'</a></li><li><a href="#" class="info">'+localStorage.getItem("lastname")+'</a></li><li><a href="#" class="info">'+localStorage.getItem("email")+'</a></li><li><a href="#" class="info">'+localStorage.getItem("phone")+"</a></li>"),$("#dataInfo").listview("refresh")):void 0}),$(document).on("pageinit","#editProfile",function(){return console.log("Building DOM editing profile"),$("input#userEmailEditProfile").val(localStorage.getItem("email")).attr("disabled","disabled"),$("input#firtsnameEditProfile").val(localStorage.getItem("firstname")),$("input#lastnameEditProfile").val(localStorage.getItem("lastname")),$("input#phoneEditProfile").val(localStorage.getItem("phone")),$("#updateProfile").on("click",function(){var a;return""!==$("input#firtsnameEditProfile").val()&&""!==$("input#lastnameEditProfile").val()&&""!==$("input#phoneEditProfile").val()?(a={},a.cookie="5852c0ef0719d1e0922e8e9806a4f5aa",a.email=localStorage.getItem("email"),a.firstname=localStorage.getItem("firstname")!==$("input#firtsnameEditProfile").val()?$("input#firtsnameEditProfile").val():localStorage.getItem("firstname"),a.lastname=localStorage.getItem("lastname")!==$("input#lastnameEditProfile").val()?$("input#lastnameEditProfile").val():localStorage.getItem("lastname"),a.phone=localStorage.getItem("phone")!==$("input#phoneEditProfile").val()?$("input#phoneEditProfile").val():localStorage.getItem("phone"),console.log(a),sessionStorage.setItem("cookie",a.cookie),localStorage.setItem("email",a.email),localStorage.setItem("firstname",a.firstname),localStorage.setItem("lastname",a.lastname),localStorage.setItem("phone",a.phone),console.log(localStorage.getItem("firstname")+", "+localStorage.getItem("lastname")+", "+localStorage.getItem("phone")+", "+sessionStorage.getItem("cookie")),$.mobile.changePage("#profile")):alert("Hay campos en blanco")}),$("#deleteUser").on("click",function(){return console.log("click on delete"),sessionStorage.removeItem("cookie"),localStorage.removeItem("email"),localStorage.removeItem("firstname"),localStorage.removeItem("lastname"),localStorage.removeItem("phone"),$("#loginForm").reset(),$("#createUserForm").reset(),0===sessionStorage.length?(console.log("sessionStorage clean"),$.mobile.changePage("#login")):$.mobile.changePage("#home")}),$("#logout").on("click",function(){return console.log("click on logout"),sessionStorage.removeItem("cookie"),$("#loginForm").reset(),$("#createUserForm").reset(),0===sessionStorage.length?(console.log("sessionStorage clean"),$.mobile.changePage("#login")):$.mobile.changePage("#home")})}),$(document).on("pageinit","#simulator",function(a){var b,c,d;return console.log("ready for simulator"),b=function(){var a,b,c,e,f,g,h,i,j;return a=$("#txt-amount").val(),e=$("#txt-interestRate").val(),b=$("#txt-feeNumber").val(),f=Math.pow(1+e/100,-b),g=1-f,h=a*(e/100),c=d(h/g),j=d(c*b),i=d(j-a),$("#resultsCalculateCredit").append('<label id="txt-feeToPay">Cuota a Pagar:<strong class="simulator"> $ '+c+"</strong></label>"),$("#resultsCalculateCredit").append('<label id="txt-totalPay">Valor Total Pagado:<strong class="simulator"> $ '+j+"</strong></label>"),$("#resultsCalculateCredit").append('<label id="txt-totalInterest">Total Inter√©s Pagado:<strong class="simulator"> $ '+i+"</strong></label>")},d=function(a){var b;return b=Math.round(100*a)/100+"",-1===b.indexOf(".")?b+=".00":b.length-b.indexOf(".")===2&&(b+="0"),b},c=function(){return $("#txt-amount").val(""),$("#txt-interestRate").val(""),$("#txt-feeNumber").val(""),$("#txt-feeToPay").remove(),$("#txt-totalPay").remove(),$("#txt-totalInterest").remove()},$("#btnCalculateCredit").on("click",function(){return console.log("click on calculateCredit"),b(),a.preventDefault()}),$("#btnResetSimulatorFields").on("click",function(){return console.log("click on btnResetSimulatorFields"),c(),a.preventDefault()})}),$(document).on("pageinit","#coops",function(){var a,b,c,d,e;return console.log("ready for coops"),a=function(){var a;return a=decodeURIComponent(document.location.search),navigator.geolocation.getCurrentPosition(c,b)},c=function(a){var b,c,e;return c=a.coords.latitude,e=a.coords.longitude,b=a.coords.latitude+","+a.coords.longitude,d(c,e)},b=function(a){switch(a.code){case a.PERMISSION_DENIED:return alert("User did not share geolocation data");case a.POSITION_UNAVAILABLE:return alert("Could not detect current position");case a.TIMEOUT:return alert("Retrieving position timed out");default:return alert("Unknown Error")}},d=function(a,b){var c,d,f,g,h,i,j,k;return d=new google.maps.DirectionsRenderer,h=new google.maps.LatLng(a,b),k={center:h,zoom:10,mapTypeId:google.maps.MapTypeId.ROADMAP},i=new google.maps.Map(document.getElementById("map"),k),c=[["Punto 1","4.5980556","-74.0758333"],["Punto 2","4.6080556","-74.0758333"],["Punto 3","4.7180556","-74.0758333"],["Punto 4","4.8280556","-74.0758333"]],e(i,c),j=new google.maps.Marker({position:h,animation:google.maps.Animation.BOUNCE}),f=new google.maps.Geocoder,g=new google.maps.InfoWindow,f.geocode({latLng:h},function(a,b){var c,e,f,k,l;return b===google.maps.GeocoderStatus.OK?a[0]?(d.setMap(i),j.setMap(i),j.setPosition(h),k=a[0].formatted_address.split(",",2),c=k[0].split("-",2),l=a[3].formatted_address.split(",",2),document.getElementById("txt-coopAddress").value=c[0],e=l[0],f=a[5].formatted_address,g.setContent(document.getElementById("txt-coopAddress").value),g.open(i,j)):alert("No results found"):alert("Error")})},e=function(a,b){var c,d,e;for(d=0;d<b.length;)c=0,infoPoints.push(new google.maps.InfoWindow),e=new google.maps.Marker({position:new google.maps.LatLng(b[d][1],b[d][2]),map:a,title:b[d][0]}),directionsDisplay.setMap(a),e.setMap(a),e.setPosition(e.position),c++,d++;return google.maps.event.addListener(e,"click",function(){var b;for(d=0,b=[];c>=d;)infoPoints[d].getContent(),infoPoints[d].open(a,e),b.push(d++);return b})},console.log("execute getLocation"),a()});